---
layout: post
title: 操作栈
datetime: 2014-01-23 23:10
tags: cpp, data structure
---
   
{{ page.title }}
================

<h5>操作栈</h5>

最近项目需要用到操作撤销与恢复的功能，但是却苦于不知道如何称呼支持这些操作的数据结构，因此就给其取了个“操作栈”的名称。   

操作栈的原理比较简单，可以用如下的数字列表作为示例：   
1、数字列表为空：【】   
2、操作（写入数字1）：【1】   
3、操作（写入数字2）：【1，2】   
4、操作（写入数字3）：【1，2，3】   
5、撤销（写入数字3）：【1，2】   
6、恢复（写入数字3）：【1，2，3】   
7、撤销（写入数字3）：【1，2】   
8、操作（写入数字4）：【1，2，4】   
9、撤销（写入数字4）：【1，2】   
10、撤销（写入数字2）：【1】   
11、撤销（写入数字1）：【】   

可以看到，上述的列表操作其实类似于一个栈，与栈不同的地方在于有新的操作的时候，这个操作之后的所有操作都会从记录中删除，具体的过程只需要在编辑器中打几个数字，按ctrl+z撤销，按ctrl+y恢复就可以体会到了。   


<h5>代码</h5>

我用C++代码对操作栈进行了简单的封装，只包含操作、删除、恢复、获取当前的操作这些基本接口，内部的栈结构使用的是STL的双端队列，因为考虑到需要在两端进行栈操作，并且需要随机存取。   

+ [COperationStack.h](http://www.onlyan.org/files/COperationStack/COperationStack.h) 操作栈类声明   
+ [COperationStack.cpp.h](http://www.onlyan.org/files/COperationStack/COperationStack.cpp.h) 操作栈类实现
+ [main.cpp](http://www.onlyan.org/files/COperationStack/main.cpp) 主测试函数

说明：C++模板类声明和实现应该放在一起，否则链接的时候会出错，因此采用.h作为声明文件，使用.cpp.h作为实现文件，使用的时候只需要包含.cpp.h文件就可以了。   
